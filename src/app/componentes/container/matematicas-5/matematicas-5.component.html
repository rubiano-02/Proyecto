<!-- Barra de progreso -->
<div *ngIf="!terminado" class="barra-progreso">
  <div class="barra-fondo">
    <div class="barra-relleno" [style.width.%]="(ejercicioActual - 1) / totalEjercicios * 100"></div>
  </div>
  <span class="progreso-contador">{{ ejercicioActual }}/{{ totalEjercicios }}</span>
</div>

<!-- Contenedor principal -->
<div class="ejercicio-contenedor">
  <!-- Ejercicio activo -->
  <div *ngIf="!terminado" class="zona-ejercicio" data-aos="zoom-in">
    <div class="operacion">
      <!-- Condicionales para mostrar input en el lugar del número faltante -->
      <ng-container *ngIf="posicion === 'izq'; else mostrarNumero1">
        <input type="number" [(ngModel)]="respuestaUsuario" class="input-faltante" placeholder="?" [disabled]="mensaje !== ''" />
      </ng-container>
      <ng-template #mostrarNumero1>
        <span class="numero">{{ numero1 }}</span>
      </ng-template>

      <span class="signo">{{ operador }}</span>

      <ng-container *ngIf="posicion === 'der'; else mostrarNumero2">
        <input type="number" [(ngModel)]="respuestaUsuario" class="input-faltante" placeholder="?" [disabled]="mensaje !== ''" />
      </ng-container>
      <ng-template #mostrarNumero2>
        <span class="numero">{{ numero2 }}</span>
      </ng-template>

      <span class="igual">=</span>
      <span class="numero">{{ resultado }}</span>
    </div>

    <div class="respuesta-row">
      <button (click)="verificar()" [disabled]="mensaje !== '' || respuestaUsuario === null">Comprobar</button>

      <div class="mensaje">
        <span *ngIf="color === 'green'" class="correcto">✔ Correcto</span>
        <span *ngIf="color === 'red'" class="incorrecto">
          ❌ Solución correcta 
          
        </span>
      </div>
    </div>
  </div>

  <!-- Resultado final -->
  <div *ngIf="terminado" class="zona-final" data-aos="zoom-in">
    <p class="titulo-final">CALIFICACIÓN</p>
    <div class="resultado-final">
      <span class="resultado-numero">{{ calificacion }}</span>
      <span class="resultado-slash">/</span>
      <span class="resultado-total">{{ totalEjercicios }}</span>
    </div>
    <button class="volver" routerLink="/principal">Volver al inicio</button>
  </div>
</div>
