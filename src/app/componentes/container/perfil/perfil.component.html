<button class="menu-toggle" (click)="toggleSidebar()" [class.active]="isSidebarActive" aria-label="Abrir menú">
  <i class="fa-solid fa-bars"></i>
</button>

<div class="container">
  <aside class="sidebar" [class.active]="isSidebarActive" id="sidebar">
    <nav class="menu">
      <div class="menu-item" (click)="irAPrincipal()" routerLinkActive="activo">
        <img src="assets/Images/Casa.png" alt="Inicio" />
        <span>{{ 'MENU_INICIO' | translate }}</span>
      </div>

      <div class="menu-item" (click)="irAEjercicio()" [class.activo]="esRutaActivaEjercicio()">
        <img src="assets/Images/Ejercicios.png" alt="Ejercicios" />
        <span>{{ 'MENU_EJERCICIOS' | translate }}</span>
      </div>

      <a routerLink="/foro" class="menu-item">
        <img src="assets/Images/Foro.png" alt="Foro" />
        <span>{{ 'MENU_FORO' | translate }}</span>
      </a>

      <a routerLink="/perfil" class="menu-item active">
        <img src="assets/Images/Perfil.png" alt="Perfil" />
        <span>{{ 'MENU_PERFIL' | translate }}</span>
      </a>

      <a routerLink="/configuracion" class="menu-item">
        <img src="assets/Images/Mas.png" alt="Más" />
        <span>{{ 'MENU_MAS' | translate }}</span>
      </a>
    </nav>
  </aside>

  <main class="contenido">
    <div class="perfil-card">

      <div
        class="banner"
        (click)="seleccionarImagen('banner')"
        [style.backgroundImage]="imagenBanner ? 'url(' + imagenBanner + ')' : 'url(assets/Images/BannerDefault.png)'"
        style="background-size: cover; background-position: center; cursor: pointer;">
      </div>
      <input type="file" accept="image/*" (change)="cambiarImagen($event, 'banner')" #inputBanner hidden>

      <button (click)="uploadBanner()" [disabled]="!selectedBannerFile">{{ 'PERFIL_SUBIR_FONDO' | translate }}</button>
      <p *ngIf="bannerUploadMessage" class="upload-message">{{ bannerUploadMessage }}</p>

      <div class="perfil-main-content">
        <div class="usuario">
          <img
            [src]="imagenAvatar || 'assets/Images/Foto De Perfil.png'"
            alt="Foto de perfil del usuario"
            class="avatar"
            (click)="seleccionarImagen('avatar')"
            style="cursor: pointer;" />
          <input type="file" accept="image/*" (change)="cambiarImagen($event, 'avatar')" #inputAvatar hidden>

          <button (click)="uploadAvatar()" [disabled]="!selectedAvatarFile">{{ 'PERFIL_SUBIR_FOTO' | translate }}</button>
          <p *ngIf="avatarUploadMessage" class="upload-message">{{ avatarUploadMessage }}</p>

          <h2>{{ userProfile.nombre }}</h2>
          <p class="fecha">{{ 'PERFIL_CREADA_EL' | translate }} <br />{{ userProfile.fecha_registro | date:'dd/MM/yyyy' }}</p>
          <img src="assets/Images/Libro.png" alt="Libro" class="libro-icono" />
        </div>

        <div class="linea"></div>

        <div class="logros">
          <h3>
            {{ 'PERFIL_LOGROS' | translate }} <img src="assets/Images/Trofeo.png" alt="Trofeo" class="icono-titulo-logros" />
          </h3>
          <div class="logro">
            <img src="assets/Images/Objetivo.png" alt="Objetivo" class="icono-logro" />
            {{ 'PERFIL_LOGRO_90' | translate }}
            <div class="barra">
              <div class="progreso rojo" style="width: 60%"><span>60%</span></div>
            </div>
          </div>
          <div class="logro">
            <img src="assets/Images/Calendario.png" alt="Calendario" class="icono-logro" />
            {{ 'PERFIL_LOGRO_10_DIAS' | translate }}
            <div class="barra">
              <div class="progreso azul" style="width: 45%"><span>45%</span></div>
            </div>
          </div>
          <div class="logro">
            <img src="assets/Images/Fuego.png" alt="Fuego" class="icono-logro" />
            {{ 'PERFIL_LOGRO_CONSTANCIA' | translate }}
            <div class="barra">
              <div class="progreso naranja" style="width: 75%"><span>75%</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
