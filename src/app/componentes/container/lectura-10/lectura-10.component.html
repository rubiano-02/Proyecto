<div *ngIf="!terminado" class="contenedor" data-aos="fade-up">
  <h1><strong>RelaciÃ³n causa y efecto</strong></h1>
  <p>Haz clic primero en una <strong>causa</strong>, luego en su <strong>efecto</strong>.</p>

  <div class="tablas">
    <div class="columna columna-causa">
      <h3>Causas</h3>
      <div *ngFor="let causa of causas">
        <div *ngIf="!relacionesUsuario[causa]" [@desaparecer]="desapareciendo.has(causa) ? 'oculto' : 'visible'"
          (click)="seleccionarCausa(causa)" [class.seleccionada]="causa === seleccionCausa" class="item animado"
          [style.backgroundColor]="colores[causa] || ''">
          {{ causa }}
        </div>
      </div>


    </div>

    <div class="columna columna-efecto">
      <h3>Efectos</h3>
      <div *ngFor="let efecto of efectos">
        <div *ngIf="!efectosUsados.includes(efecto)" [@desaparecer]="desapareciendo.has(efecto) ? 'oculto' : 'visible'"
          (click)="seleccionarEfecto(efecto)" [class.seleccionado]="efecto === seleccionEfecto" class="item animado"
          [style.backgroundColor]="colores[efecto] || ''">
          {{ efecto }}
        </div>
      </div>


    </div>
  </div>

  <button class="verificar" (click)="verificar()">âœ… Verificar</button>

  <p class="mensaje" *ngIf="mensaje" [style.color]="mensaje.includes('âœ”') ? 'green' : 'crimson'">
    {{ mensaje }}
  </p>
</div>

<!-- âœ… Pantalla de calificaciÃ³n final -->
<div *ngIf="terminado" class="zona-final pantalla-final" data-aos="zoom-in">
  <p class="titulo-final">CALIFICACIÃ“N</p>
  <div class="resultado-final">
    <span class="resultado-numero">{{ calificacion }}</span>
    <span class="resultado-slash">/</span>
    <span class="resultado-total">5</span>
  </div>
  <button class="volver" routerLink="/prin-lectura">Volver al inicio</button>
</div>
<button class="imagen-boton" (click)="abrirModal()">
  <img src="assets/Images/pensando.png" alt="Abrir modal" class="imagen-esquina">
  <img src="assets/Images/PenAyuda.png" alt="Ayuda" class="imagen-hover">
</button>
<button class="btn-volver" routerLink="/prin-lectura">Volver</button>

<!-- Modal -->
<div class="modal-fondo" *ngIf="modalAbierto">
  <div class="modal-contenido" data-aos="zoom-in">
    <span class="cerrar" (click)="cerrarModal()">&times;</span>
    <h2>ğŸ”— Â¿CÃ³mo jugar "RelaciÃ³n causa y efecto"?</h2>
    <ul>
      <li>ğŸ–±ï¸ Primero haz clic en una <strong>causa</strong> (lado izquierdo).</li>
      <li>ğŸ‘‰ Luego haz clic en su <strong>efecto</strong> (lado derecho).</li>
      <li>ğŸ˜Š Intenta encontrar las parejas correctas.</li>
      <li>ğŸ¯ Sigue jugando hasta emparejar todas.</li>
    </ul>
    <p>ğŸ’¡ <strong>Consejo:</strong> Piensa: Â¿quÃ© pasÃ³ primero? Â¿QuÃ© sucediÃ³ despuÃ©s?</p>
  </div>
</div>