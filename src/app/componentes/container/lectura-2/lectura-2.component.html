<div class="ejercicio-contenedor">
  <!-- Barra de progreso -->
  <div *ngIf="!terminado" class="barra-progreso">
    <div class="barra-fondo">
      <div class="barra-relleno" [style.width.%]="(ejercicioActual) / totalEjercicios * 100"></div>
    </div>
    <span class="progreso-contador">{{ ejercicioActual + 1 }}/{{ totalEjercicios }}</span>
  </div>

  <!-- Ejercicio -->
  <div *ngIf="!terminado" class="zona-ejercicio" data-aos="fade-up">
    <p class="texto">{{ ejercicios[ejercicioActual].texto }}</p>
    <div class="opciones">
      <button *ngFor="let opcion of ejercicios[ejercicioActual].opciones" class="opcion" (click)="seleccionar(opcion)">
        {{ opcion }}
      </button>
    </div>
    <p class="mensaje" [style.color]="color">{{ mensaje }}</p>
  </div>
  <!-- Imagen en la esquina que abre el modal -->
<button class="imagen-boton" (click)="abrirModal()">
  <img src="assets/Images/pensando.png" alt="Abrir modal" class="imagen-esquina">
  <img src="assets/Images/PenAyuda.png" alt="Ayuda" class="imagen-hover">
</button>
<button class="btn-volver" routerLink="/prin-lectura">Volver</button>
  <!-- Modal -->
  <div class="modal-fondo" *ngIf="modalAbierto">
    <div class="modal-contenido" data-aos="zoom-in">
      <span class="cerrar" (click)="cerrarModal()">&times;</span>
      
    <h2>Â¿Necesitas ayuda? Â¡AquÃ­ van unas pistas!</h2>
    <p>ğŸ‘§ğŸ½ <strong>Lola saliÃ³ al parque con su perro. El cielo estaba oscuro y...</strong></p>
    <p>Ahora tienes que elegir quÃ© pasÃ³ despuÃ©s. No hay una sola respuesta correcta, Â¡usa tu imaginaciÃ³n! Pero aquÃ­ tienes unas ideas para ayudarte:</p>
    
    <ul>
      <li>ğŸ’­ <strong>Lee bien la frase:</strong> Imagina la escena en tu cabeza. Â¿CÃ³mo te la imaginas si el cielo estÃ¡ oscuro?</li>
      <li>ğŸŒ§ï¸ <strong>Piensa en lo lÃ³gico:</strong> Si el cielo estÃ¡ oscuro, podrÃ­a pasar algo como que empiece a llover.</li>
      <li>ğŸ‰ <strong>TambiÃ©n puedes ser creativo:</strong> A veces las historias pueden tener cosas divertidas o mÃ¡gicas, como un dragÃ³n o un perro en bicicleta.</li>
      <li>âœ… <strong>No te preocupes si te equivocas:</strong> Puedes intentarlo varias veces y divertirte con cada opciÃ³n.</li>
    </ul>

    <p>ğŸ‘‰ <strong>Elige la opciÃ³n que te parezca mÃ¡s divertida o interesante. Â¡EstÃ¡s creando una historia!</strong></p>
    </div>
  </div>

  <!-- Pantalla final -->
  <div *ngIf="terminado" class="zona-final" data-aos="zoom-in">
    <p class="titulo-final">CALIFICACIÃ“N</p>
    <div class="resultado-final">
      <span class="resultado-numero">{{ calificacion }}</span>
      <span class="resultado-slash">/</span>
      <span class="resultado-total">{{ totalEjercicios }}</span>
    </div>
    <button class="volver" routerLink="/prin-lectura">Volver al inicio</button>
  </div>
</div>