<button class="menu-toggle" (click)="toggleSidebar()" [class.active]="isSidebarActive" aria-label="Abrir menú">
  <i class="fa-solid fa-bars"></i>
</button>

<div class="container">
  <aside class="sidebar" [class.active]="isSidebarActive" id="sidebar">
    <div class="menu">
      <div class="menu-item" routerLink="/principal" routerLinkActive="activo">
        <img src="assets/Images/Casa.png" alt="Inicio" />
        <span>{{ 'MENU_INICIO' | translate }}</span>
      </div>

      <div class="menu-item" routerLink="/ejer-matematicas" routerLinkActive="activo">
        <img src="assets/Images/Ejercicios.png" alt="Ejercicios" />
        <span>{{ 'MENU_EJERCICIOS' | translate }}</span>
      </div>

      <div class="menu-item" routerLink="/foro" routerLinkActive="activo">
        <img src="assets/Images/Foro.png" alt="Foro" />
        <span>{{ 'MENU_FORO' | translate }}</span>
      </div>

      <div class="menu-item" routerLink="/perfil" routerLinkActive="activo">
        <img src="assets/Images/Perfil.png" alt="Perfil" />
        <span>{{ 'MENU_PERFIL' | translate }}</span>
      </div>

      <div class="menu-item" routerLink="/configuracion" routerLinkActive="activo">
        <img src="assets/Images/Mas.png" alt="Más" />
        <span>{{ 'MENU_MAS' | translate }}</span>
      </div>
    </div>
  </aside>

  <main class="contenido-central">
    <div class="ilustracion">
      <img src="assets/Images/KoalaMatematicas.gif" alt="Oso lec" />
      <div class="titulo1">
        <img src="assets/Images/titulomat.png" alt="Titulo-lec" />
      </div>
    </div>
    <div class="texto-encabezado">
      <h2>─────────────────────────────────────────────────────────────────</h2>
    </div>

    <div class="seccion-central">
      <div class="contenedor-cuadros">
        <div class="cuadro">
          <div class="texto-cuadro">
            <h2>Suma y Aprende</h2>
            <ul class="sin-viñetas">
              <li>Operaciones simples de suma con apoyo visual llamativo.</li>
              <li>Estimula el cálculo mental y la atención.</li>
              <li>Retroalimentación inmediata y progreso visible.</li>
            </ul>
          </div>
          <div class="accion-cuadro">
            <button class="iniciar" routerLink="/matematicas-1">{{ 'BOTON.INICIAR' | translate }}</button>
            <img src="assets/Images/Suma.png" alt="Suma" class="imagen-cuadro" />
          </div>
        </div>

        <div class="seccion-derecha">
          <div class="contenedor-lateral">
          </div>
        </div>

        <div class="cuadro">
          <div class="texto-cuadro">
            <h2>Elige La Operación Correcta</h2>
            <ul class="sin-viñetas">
              <li>Ejercita tu razonamiento con operaciones matemáticas interactivas.</li>
              <li>Elige entre varias opciones para completar la operación correcta.</li>
              <li>Recibe retroalimentación inmediata y sigue tu progreso.</li>
            </ul>
          </div>
          <div class="accion-cuadro">
            <button class="iniciar" routerLink="/matematicas-1">{{ 'BOTON.INICIAR' | translate }}</button>
            <img src="assets/Images/Seleccionar.png" alt="Suma" class="imagen-cuadro" />
          </div>
        </div>
      </div>
    </div>
  </main>

  <aside class="contenido-lateral">
    <div class="seccion-derecha">
      <div class="contenedor-lateral">
        <app-streak></app-streak>
      </div>

      <div class="cuadro-lateral">
        <h3>📊 {{ 'ESTADISTICAS.TITULO' | translate }}</h3>
        <div class="estadistica">
          <span class="etiqueta">{{ 'ESTADISTICAS.PROGRESO_GENERAL' | translate }}</span>
          <div class="progreso azul">
            <div [style.width.%]="progresoGeneralAnimado"></div>
          </div>
          <span class="porcentaje">{{ progresoGeneral }}%</span>
        </div>
        <div class="estadistica">
          <span class="etiqueta">{{ 'ESTADISTICAS.PUNTAJE' | translate }}</span>
          <div class="progreso amarillo">
            <div [style.width.%]="puntajeAnimado"></div>
          </div>
          <span class="porcentaje">{{ puntaje }}%</span>
        </div>
        <div class="estadistica">
          <span class="etiqueta">{{ 'ESTADISTICAS.TIEMPO' | translate }}</span>
          <div class="progreso naranja">
            <div [style.width.%]="tiempoAnimado"></div>
          </div>
          <span class="porcentaje">{{ tiempo }}%</span>
        </div>
      </div>

      <div class="cuadro-lateral">
        <h3>🏆 {{ 'DESAFIOS.TITULO' | translate }}</h3>
        <div class="desafios-lista">
          <ng-container *ngIf="getDesafioByMetrica('ejercicios_completados_total', 1) as desafio1">
            <div class="desafio-item">
              <span class="desafio-texto">{{ desafio1.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(desafio1)"
                  [class.completado]="isDesafioCompletado(desafio1)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(desafio1) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(desafio1)" class="completado-badge">✅</span>
            </div>
          </ng-container>
          <ng-container *ngIf="getDesafioByMetrica('ejercicios_completados_total', 5) as desafio2">
            <div class="desafio-item">
              <span class="desafio-texto">{{ desafio2.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(desafio2)"
                  [class.completado]="isDesafioCompletado(desafio2)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(desafio2) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(desafio2)" class="completado-badge">✅</span>
            </div>
          </ng-container>
          <ng-container *ngIf="getDesafioByMetrica('dias_consecutivos', 3) as rachaInicial">
            <div class="desafio-item">
              <span class="desafio-texto">{{ rachaInicial.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(rachaInicial)"
                  [class.completado]="isDesafioCompletado(rachaInicial)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(rachaInicial) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(rachaInicial)" class="completado-badge">✅</span>
            </div>
          </ng-container>
          <ng-container *ngIf="getDesafioByMetrica('dias_consecutivos', 7) as rachaImparable">
            <div class="desafio-item">
              <span class="desafio-texto">{{ rachaImparable.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(rachaImparable)"
                  [class.completado]="isDesafioCompletado(rachaImparable)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(rachaImparable) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(rachaImparable)" class="completado-badge">✅</span>
            </div>
          </ng-container>
          <ng-container *ngIf="getDesafioByMetrica('calificacion_90_plus', 1) as excelenciaPrecisa">
            <div class="desafio-item">
              <span class="desafio-texto">{{ excelenciaPrecisa.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(excelenciaPrecisa)"
                  [class.completado]="isDesafioCompletado(excelenciaPrecisa)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(excelenciaPrecisa) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(excelenciaPrecisa)" class="completado-badge">✅</span>
            </div>
          </ng-container>
          <ng-container *ngIf="getDesafioByMetrica('calificacion_90_plus', 3) as maestroPrecision">
            <div class="desafio-item">
              <span class="desafio-texto">{{ maestroPrecision.nombre }}</span>
              <div class="desafio-progreso">
                <div class="progreso-barra" [style.width.%]="getProgresoPorcentaje(maestroPrecision)"
                  [class.completado]="isDesafioCompletado(maestroPrecision)"></div>
                <span class="progreso-valor">{{ getProgresoTexto(maestroPrecision) }}</span>
              </div>
              <span *ngIf="isDesafioCompletado(maestroPrecision)" class="completado-badge">✅</span>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </aside>

</div>
<style>
</style>