<div class="contenedor" data-aos="fade-up">
 
  <h1 data-aos="zoom-in"> Completa la oración:</h1>

  <p class="oracion" data-aos="fade-right">
    El gato está en la 
    <span class="cajon" cdkDropList id="cajon0" [cdkDropListData]="[]" [cdkDropListConnectedTo]="['opciones']"
      (cdkDropListDropped)="soltar($event, 0)">
      <ng-container *ngIf="respuestas[0]; else vacio1">
        <div class="opcion insertada" [class.animacion-insercion]="animar[0]" cdkDrag (click)="sacarDelCajon(0)">
          {{ respuestas[0] }}
        </div>
      </ng-container>
      <ng-template #vacio1></ng-template>
    </span>, se estira y lame su pata. Afuera brilla el 
    <span class="cajon" cdkDropList id="cajon1" [cdkDropListData]="[]" [cdkDropListConnectedTo]="['opciones']"
      (cdkDropListDropped)="soltar($event, 1)">
      <ng-container *ngIf="respuestas[1]; else vacio2">
        <div class="opcion insertada" [class.animacion-insercion]="animar[1]" cdkDrag (click)="sacarDelCajon(1)">
          {{ respuestas[1] }}
        </div>
      </ng-container>
      <ng-template #vacio2></ng-template>
    </span>, dorado como un farol. De pronto pasa un 
    <span class="cajon" cdkDropList id="cajon2" [cdkDropListData]="[]" [cdkDropListConnectedTo]="['opciones']"
      (cdkDropListDropped)="soltar($event, 2)">
      <ng-container *ngIf="respuestas[2]; else vacio3">
        <div class="opcion insertada" [class.animacion-insercion]="animar[2]" cdkDrag (click)="sacarDelCajon(2)">
          {{ respuestas[2] }}
        </div>
      </ng-container>
      <ng-template #vacio3></ng-template>
    </span>, corriendo con un botón. El gato apenas lo vio... y durmiendo se quedó.
  </p>
<button class="imagen-boton" (click)="abrirModal()">
  <img src="assets/Images/pensando.png" alt="Abrir modal" class="imagen-esquina">
  <img src="assets/Images/PenAyuda.png" alt="Ayuda" class="imagen-hover">
</button>
<button class="btn-volver" routerLink="/prin-lectura">Volver</button>

  <!-- Modal -->
  <div class="modal-fondo" *ngIf="modalAbierto">
    <div class="modal-contenido" data-aos="zoom-in">
      <span class="cerrar" (click)="cerrarModal()">&times;</span>
      
 <h2> ¿Necesitas ayuda? ¡Aquí te explico cómo hacerlo!</h2>
    <p>Vamos a completar la oración usando las palabras correctas.</p>
    
    <ul>
      <li>👀 <strong>Lee toda la oración primero:</strong> Imagina lo que está pasando en la historia del gato.</li>
      <li>🧩 <strong>Busca las palabras que tienen más sentido:</strong> ¿Dónde estaría el gato? ¿Qué brilla en el cielo? ¿Quién corre con un botón?</li>
      <li>👉 <strong>Haz clic o arrastra las palabras verdes</strong> a los espacios vacíos (los cuadritos azules).</li>
      <li>🔍 <strong>Si no estás seguro, prueba y vuelve a intentar:</strong> No pasa nada si te equivocas.</li>
    </ul>

    <p>💡 <strong>Consejo:</strong> Piensa en lo que hacen los gatos y lo que ocurre durante el día. ¡Tú puedes!</p>
    </div>
  </div>


  <!-- ✅ Todo esto aparece solo después de que Angular terminó de renderizar -->
  <div *ngIf="mostrarContenido">
    <div class="opciones" id="opciones" cdkDropList
         [cdkDropListData]="opciones"
         [cdkDropListConnectedTo]="['cajon0', 'cajon1', 'cajon2']"
         (cdkDropListDropped)="soltar($event)"
         data-aos="zoom-in-up">
      <div *ngFor="let opcion of opciones; let i = index"
           class="opcion"
           cdkDrag
           (click)="insertarPorClick(opcion, i)">
        {{ opcion }}
      </div>
    </div>

    <button class="verificar" (click)="verificar()">Verificar</button>
  </div>

 <!-- Mensajes dinámicos -->
<div *ngIf="mensaje && !terminado" class="mensaje">
  <span *ngIf="color === 'green'" class="correcto">✔ Correcto</span>
  <span *ngIf="color === 'red'" class="incorrecto">Casi. ¡Corrige!</span>
</div>

<!-- Calificación final -->
<div *ngIf="terminado" class="pantalla-final">
  <div class="zona-final" data-aos="fade-up">
    <p class="titulo-final">CALIFICACIÓN</p>
    <div class="resultado-final">
      <span class="resultado-numero">{{ calificacion }}</span>
      <span class="resultado-slash">/</span>
      <span class="resultado-total">5</span>
    </div>
    <button class="volver" routerLink="/prin-lectura">Volver al inicio</button>
  </div>
</div>


</div>
